<html>
  <head>
    <meta charset="UTF-8" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    
    <script type="text/javascript">
//functia pentru primul SELECT
function cerereGETCategorii() {
        path = "http://localhost:4000/toothPasteCategories";

        $(document).ready(function () {
          $.getJSON(path)
            .done(function (data) {
              var content = "<ul class='nav flex-column'>";

              $.each(data, function (index, value) {
                content +=
                  "<li class='nav-item'><a class='nav-link' href='" +
                  path +
                  "/" +
                  ++index +
                  "'>" +
                  value.name +
                  "</a></li>";
              });
              content += "</ul>";
              $(content).appendTo("#zonaA");
            })
            .fail(function (jqxhr, textStatus, error) {
              var err = textStatus + ", " + error;
              console.log("Request failed: " + err);
            });
        });
      }

      //functia pentru al doilea SELECT
      function cerereGETProduse(id) {
        adresa = "http://localhost:4000/products?toothPasteCategoryId=" + id; //id-ul categoriei preluat din front-end

        $(document).ready(function () {
          $.getJSON(adresa, function (raspuns) {
            $.each(raspuns, function (indice, produs) {
              continutDeAfisat =
                "<div style='border: 2px solid black;'>" +
                "<br> Brand: " +
                produs.brand +
                "<br> Tip: " +
                produs.type +
                "<img src='poze produse/" +
                produs.image +
                "' alt='imagine produs' width='150' heigth='150' style='border: 2px solid black;'/> <br>" +
                "<br> Cantitate: " +
                produs.quantity +
                "<br> Preț: " +
                produs.price +
                "<br> Aromă: " +
                produs.flavor +
                "<br> Recomandată copiilor: " +
                produs.forKids +
                "</div><br>";

              $(continutDeAfisat).appendTo("#zonaB");
            });
          });
        });
      }

      //functia pentru DELETE produs
      function cerereDELETEProdus(produsId) {}

      //functia pentru INSERT produs
      function cererePOSTProdus(categorieId) {
        //id-ul categoriei preluat din front-end
        adresa = "http://localhost:4000/products";

        dateDeTrimis = $("form").serialize();
        $.post(adresa, dateDeTrimis);
      }


    </script>
  </head>

  <body>
    <body>
      <div id="header">
        <button onclick="cerereGETCategorii()">Afiseaza categorii</button> <br />
      </div>

    <div id="zonaA"></div>

    <div class="card mb-3" style="max-width: 540px;">
      <div class="row no-gutters">
        <div class="col-md-4">
          <img src="..." class="card-img" alt="..." />
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">
              This is a wider card with supporting text below as a natural
              lead-in to additional content. This content is a little bit
              longer.
            </p>
            <p class="card-text">
              <small class="text-muted">Last updated 3 mins ago</small>
            </p>
          </div>
        </div>
      </div>
    </div>

    <form>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupBrand"
            placeholder="Brand"
          />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupTip"
            placeholder="Tip"
          />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupCantitate"
            placeholder="Cantitate"
          />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupPret"
            placeholder="Pret"
          />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupAroma"
            placeholder="Aroma"
          />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="formGroupRecomandataCopiilor"
            placeholder="Recomandata copiilor"
          />
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Trimite</button>
    </form>

    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

  </body>
</html>
